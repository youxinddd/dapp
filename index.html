<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>WalletConnect Demo</title>
  <script src="https://unpkg.com/@web3modal/html"></script>
  <script src="https://unpkg.com/@web3modal/ethereum"></script>
</head>
<body>
  <h2>WalletConnect v2 + Web3Modal Demo</h2>
  <button id="connectBtn">连接钱包</button>
  <p id="account"></p>

  <script>
    const projectId = "4f47f3d145f2ee6f7a553c2dc5a785f5"; // <<< 在 cloud.reown.com 获取

    // 创建 Web3Modal 实例
    const { createWeb3Modal, defaultConfig } = window['@web3modal/html'];
    const chains = [{ id: 1, name: 'Ethereum Mainnet' }]; // 可以改成 5 (Goerli) 测试网

    const modal = createWeb3Modal({
      projectId,
      chains,
      wagmiConfig: defaultConfig({ projectId, chains })
    });

    // 按钮绑定
    const btn = document.getElementById("connectBtn");
    const accountEl = document.getElementById("account");

    btn.onclick = async () => {
      try {
        const session = await modal.open();
        if (session) {
          const addr = session.address || session.accounts?.[0];
          accountEl.innerText = "已连接地址: " + addr;
        }
      } catch (err) {
        console.error("连接失败:", err);
      }
    };
  </script>
</body>
</html>
